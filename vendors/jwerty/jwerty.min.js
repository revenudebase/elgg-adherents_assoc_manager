// Get at https://github.com/keithamus/jwerty with last commit 76958ba04735952a02ef8db2f89570a34eac8d82.
// And compressed with http://refresh-sf.com/yui
//
//Usefull : http://speeves.erikin.com/2013/01/jwerty-keymapping.html
(function(c,g){var d=c.document,k=(c.jQuery||c.Zepto||c.ender||d),p,f,a,h="keydown";function o(i,n){return(i===null)?n==="null":(i===undefined)?n==="undefined":(i.is&&i instanceof k)?n==="element":Object.prototype.toString.call(i).toLowerCase().indexOf(n)>7}if(k===d){p=function(i,n){return i?k.querySelector(i,n||k):k};f=function(n,i){n.addEventListener(h,i,false)};a=function(t,n){var r=d.createEvent("Event"),s;r.initEvent(h,true,true);for(s in n){r[s]=n[s]}return(t||k).dispatchEvent(r)}}else{p=function(i,n){return k(i||d,n)};f=function(n,i){k(n).bind(h+".jwerty",i)};a=function(n,i){k(n||d).trigger(k.Event(h,i))}}var m={16:"shiftKey",17:"ctrlKey",18:"altKey",91:"metaKey"};var l={mods:{"â‡§":16,shift:16,"âŒƒ":17,ctrl:17,"âŒ¥":18,alt:18,option:18,"âŒ˜":91,meta:91,cmd:91,"super":91,win:91},keys:{"âŒ«":8,backspace:8,"â‡¥":9,"â‡†":9,tab:9,"â†©":13,"return":13,enter:13,"âŒ…":13,pause:19,"pause-break":19,"â‡ª":20,caps:20,"caps-lock":20,"âŽ‹":27,escape:27,esc:27,space:32,"â†–":33,pgup:33,"page-up":33,"â†˜":34,pgdown:34,"page-down":34,"â‡Ÿ":35,end:35,"â‡ž":36,home:36,ins:45,insert:45,del:46,"delete":46,"â†":37,left:37,"arrow-left":37,"â†‘":38,up:38,"arrow-up":38,"â†’":39,right:39,"arrow-right":39,"â†“":40,down:40,"arrow-down":40,"*":106,star:106,asterisk:106,multiply:106,"+":107,plus:107,"-":109,subtract:109,"num-.":110,"num-period":110,"num-dot":110,"num-full-stop":110,"num-delete":110,";":186,semicolon:186,"=":187,equals:187,",":188,comma:188,".":190,period:190,"full-stop":190,"/":191,slash:191,"forward-slash":191,"`":192,tick:192,"back-quote":192,"[":219,"open-bracket":219,"\\":220,"back-slash":220,"]":221,"close-bracket":221,"'":222,quote:222,apostraphe:222}};var j=47,e=0;while(++j<106){l.keys[e]=j;l.keys["num-"+e]=j+48;++e}j=111,e=1;while(++j<136){l.keys["f"+e]=j;++e}j=64;while(++j<91){l.keys[String.fromCharCode(j).toLowerCase()]=j}function b(t){var v,w,s,x,y,r,B,u,A;if(t instanceof b){return t}if(!o(t,"array")){t=(String(t)).replace(/\s/g,"").toLowerCase().match(/(?:\+,|[^,])+/g)}for(v=0,w=t.length;v<w;++v){if(!o(t[v],"array")){t[v]=String(t[v]).match(/(?:\+\/|[^\/])+/g)}r=[],s=t[v].length;while(s--){B=t[v][s];y={jwertyCombo:String(B),shiftKey:false,ctrlKey:false,altKey:false,metaKey:false};if(!o(B,"array")){B=String(B).toLowerCase().match(/(?:(?:[^\+])+|\+\+|^\+$)/g)}x=B.length;while(x--){if(B[x]==="++"){B[x]="+"}if(B[x] in l.mods){y[m[l.mods[B[x]]]]=true}else{if(B[x] in l.keys){y.keyCode=l.keys[B[x]]}else{u=B[x].match(/^\[([^-]+\-?[^-]*)-([^-]+\-?[^-]*)\]$/)}}}if(o(y.keyCode,"undefined")){if(u&&(u[1] in l.keys)&&(u[2] in l.keys)){u[2]=l.keys[u[2]];u[1]=l.keys[u[1]];for(A=u[1];A<u[2];++A){r.push({altKey:y.altKey,shiftKey:y.shiftKey,metaKey:y.metaKey,ctrlKey:y.ctrlKey,keyCode:A,jwertyCombo:String(B)})}y.keyCode=A}else{y.keyCode=0}}r.push(y)}this[v]=r}this.length=v;return this}var q=g.jwerty={event:function(s,t,r){if(o(t,"boolean")){var n=t;t=function(){return n}}s=new b(s);var u=0,x=s.length-1,w,v;return function(i){if((v=q.is(s,i,u))){if(u<x){++u;return}else{w=t.call(r||this,i,v);if(w===false){i.preventDefault()}u=0;return}}u=q.is(s,i)?1:0}},is:function(r,u,s){r=new b(r);s=s||0;r=r[s];u=u.originalEvent||u;var w=r.length,t=false;while(w--){t=r[w].jwertyCombo;for(var v in r[w]){if(v!=="jwertyCombo"&&u[v]!=r[w][v]){t=false}}if(t!==false){return t}}return t},key:function(r,t,n,i,w){var v=o(n,"element")||o(n,"string")?n:i,s=v===n?c:n,u=v===n?i:w;f(o(v,"element")?v:p(v,u),q.event(r,t,s))},fire:function(r,n,u,t){r=new b(r);var s=o(u,"number")?u:t;a(o(n,"element")?n:p(n,u),r[s||0][0])},KEYS:l}}(this,(typeof module!=="undefined"&&module.exports?module.exports:this)));